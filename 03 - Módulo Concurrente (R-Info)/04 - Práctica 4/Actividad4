{Un robot jefe asigna tareas a los trabajadores. Las tareas consisten en: 
1. Recoger flores
2. Recoger papeles
3. Vaciar bolsa
4. Finalizar.

Existen 2 robots trabajadores que reciben solicitudes de tareas del robot jefe. Para cada solicitud, reciben la tarea y la esquina donde deben realizarla (salvo cuando la tarea es 4 que no deben acceder a una esquina). Luego de recibir la tarea, los robots van a la esquina indicada, realizan la tarea y quedan a la espera de una nueva tarea.
El robot jefe inicia en la esquina (1,1) y los robots trabajadores inician en las esquinas (2,1) y (3,1). Las tareas se asignan aleatoriamente a cualquier esquina dentro del cuadrante comprendido entre las esquinas (2,2) y (100,100). El robot jefe envia 10 tareas aleatorias (entre las tareas 1 y 3) a trabajadores aleatorios y termina. Al finalizar el jefe envia la tarea 4.

Analice: existe el riesgo de que el programa quede bloqueado, y que ningun robot trabajador pueda realizar su tarea. En que caso puede suceder esto? Que resulta necesario considerar para evitar esta situacion?
RTA: Es porque la consigna nunca aclara que los robots vuelven a su esquina inicial luego de realizar su tarea. Entonces, al finalizar su ultima tarea, un robot se queda en una esquina del cuadrante, bloqueandola en el caso de que otro robot tambien tenga que ir ahi. 

}
programa Actividad4
procesos
  proceso recogerFlores(E av: numero;E ca : numero; E miAv : numero)
  comenzar
    BloquearEsquina(av, ca)
    Pos(av, ca)
    mientras(HayFlorEnLaEsquina)
      tomarFlor
    Pos(miAv,1)
    LiberarEsquina(av,ca)
  fin
  proceso recogerPapeles(E av: numero;E ca : numero; E miAv : numero)
  comenzar
    BloquearEsquina(av, ca)
    Pos(av, ca)
    mientras(HayPapelEnLaEsquina)
      tomarPapel
    Pos(miAv,1)
    LiberarEsquina(av,ca)
  fin
  proceso vaciarBolsa(E av: numero;E ca : numero; E miAv : numero)
  comenzar
    BloquearEsquina(av, ca)
    Pos(av, ca)
    mientras(HayFlorEnLaBolsa)
      depositarFlor
    mientras(HayPapelEnLaBolsa)
      depositarPapel
    Pos(miAv,1)
    LiberarEsquina(av,ca)
  fin
areas
  cuadrante: AreaPC (2,2,100,100)
  a1: AreaP(2,1,2,1)
  a2: AreaP(3,1,3,1)
  aJefe: AreaP(1,1,1,1)
robots
  robot trabajador
  variables
    miAv,ca,av,tarea : numero
    seguir : boolean
  comenzar
    miAv := PosAv
    seguir:=V
    mientras(seguir)
      RecibirMensaje(tarea,R_Jefe)
      si (tarea = 4)
        seguir:=F
      sino
        RecibirMensaje(av,R_Jefe)
        RecibirMensaje(ca,R_Jefe)
        si (tarea = 1)
          recogerFlores(av,ca,miAv)
        sino
          si (tarea = 2)
            recogerPapeles(av,ca,miAv)
          sino
            vaciarBolsa(av,ca,miAv)
  fin
  robot jefe
  variables
    robotElegido,tarea,av,ca : numero
  comenzar
    repetir 10
      Random(robotElegido,1,2)
      Random(tarea,1,3)
      Random(av,2,100)
      Random(ca,2,100)
      si (robotElegido = 1)
        EnviarMensaje(tarea,r1)
        EnviarMensaje(av,r1)
        EnviarMensaje(ca,r1)
      sino
        EnviarMensaje(tarea,r2)
        EnviarMensaje(av,r2)
        EnviarMensaje(ca,r2)
    EnviarMensaje(4,r1)
    EnviarMensaje(4,r2)
  fin
variables
  r1,r2: trabajador
  R_Jefe: jefe
comenzar
  AsignarArea(R_Jefe, aJefe)
  AsignarArea(r1,cuadrante)
  AsignarArea(r2,cuadrante)
  AsignarArea(r1,a1)
  AsignarArea(r2,a2)
  Iniciar(R_Jefe, 1,1)
  Iniciar(r1, 2,1)
  Iniciar(r2, 3,1)
fin

